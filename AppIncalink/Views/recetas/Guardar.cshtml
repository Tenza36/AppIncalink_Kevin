@model recetasModel
@{
    ViewData["Title"] = "Guardar";
    Layout = "~/Views/Shared/_Layout.cshtml";
}

<h1>Guardar</h1>
<form asp-action="Guardar" asp-controller="recetas" method="post" id="recetaForm">

    <div id="productosContainer">
        <!-- Aquí se agregarán dinámicamente los campos de productos y cantidades -->
        <div class="form-group">
            <label>Menu</label>
            <select asp-for="idMenu" class="form-control" asp-items="ViewBag.MenuOptions">
                <option value="@ViewBag.NombreMenu">@ViewBag.NombreMenu</option>
            </select>
        </div>
        <div class="form-row">
            <div class="form-group col-md-6">
                <label>Producto</label>
                <select class="form-control" name="idProducto">
                    <!-- Agrega las opciones de productos desde tu ViewBag -->
                    @foreach (var producto in ViewBag.ProductosOptions)
                    {
                        <option value="@producto.Value">@producto.Text</option>
                    }
                </select>
            </div>
            <div class="form-group col-md-6">
                <label>Cantidad</label>
                <!-- Cambié el tipo de input a "number" y eliminé el atributo "step" -->
                <input type="number" class="form-control" name="cantidad" value="@Model.cantidad" min="0.01">
            </div>
        </div>
    </div>

    <button type="submit" class="btn btn-success">Guardar Receta</button>
</form>

@section Scripts {
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script>
        $(document).ready(function () {
            $('#recetaForm').on('submit', function () {
                // No es necesario realizar ningún cambio en los valores de cantidad
                // antes de enviar el formulario
            });
        });
    </script>
}
